<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="layout/default_layout">
<th:block layout:fragment="content">
  
<!-- 개발 영역 시작 -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="cs_box">
	<h3>BMI 계산기</h3>
	<div class="cal"> 
		<ul>
			<li class="style3"> 
				<input type="radio" id="male" name="gender" value="male"> 
				<label for="male">남자</label> 
				<input type="radio" id="female" name="gender" value="female"> 
				<label for="female">여자</label> 
			</li> 
			<li class="style4"> 
				<label for="height">신장 :</label>
				<input type="text" id="height" name="height" maxlength="6" style="width:104px;ime-mode:disabled;">cm
				&nbsp;
				<label for="weight">체중 (kg):</label>
	   			<input type="text" id="weight" name="weight" maxlength="6" style="width:104px;ime-mode:disabled;">kg
	   			&nbsp;
	   			<label for="age">나이 (세):</label>
    			<input type="text" id="age" name="age" maxlength="6" style="width:104px;ime-mode:disabled;">세(만)
	   			&nbsp;&nbsp;
				<button onclick="calculateBMI()">계산</button>
    			<div class="result" id="result" style="font-weight: bold;"></div>
			</li> 
		</ul> 
		<div class="desc desc2">
			<div class="obesity" style="display:none;"> 
				<h3>나의 신체질량지수(BMI) <strong></strong></h3> 
				<div class="obesity_box" id="obesity_box"> 
					<div class="obesity_bar"></div> 
					<div class="obesity_box_inner" style="left:0;"> 
						<div class="obesity_layer"></div> 
					</div> <span style="left:0;"></span> 
				<ul class="lst_about"> </ul>
				</div> 
			</div> <p style="display:block;">남/녀, 연령 구분에 따른 신체질량지수 BMI(Body Mass Index)와 비만도를 측정해 보세요.</p> 
		</div> 
	</div> 
</div>
<p class="info">간단한 계산을 할 수 있는 웹 계산기 입니다.</p>


<script>
    
function calculateBMI() {
    var weightInput = document.getElementById("weight");
    var heightInput = document.getElementById("height");
    var genderInputs = document.getElementsByName("gender");
    var ageInput = document.getElementById("age");
    var resultDiv = document.getElementById("result");
    var chartContainer = document.querySelector(".chart-container");

    var weight = parseFloat(weightInput.value);
    var height = parseFloat(heightInput.value) / 100; // Convert height to meters
    var age = parseInt(ageInput.value);

    if (isNaN(weight) || isNaN(height) || isNaN(age)) {
      resultDiv.innerText = "값을 모두 입력하세요.";
      return;
    }

    var selectedGender = "";
    for (var i = 0; i < genderInputs.length; i++) {
      if (genderInputs[i].checked) {
        selectedGender = genderInputs[i].value;
        break;
      }
    }

    if (selectedGender === "") {
      resultDiv.innerText = "성별을 선택하세요.";
      return;
    }

    var bmi = weight / (height * height);
    var bmiCategory = getBMICategory(bmi);

    resultDiv.innerText = "나의 신체질량지수(BMI)" + bmi.toFixed(2);
    
    // Create the chart
    chartContainer.innerHTML = '<canvas id="bmiChart"></canvas>';
    var ctx = document.getElementById("bmiChart").getContext("2d");
    var chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['BMI'],
        datasets: [{
          label: 'BMI',
          data: [bmi],
          backgroundColor: getBMIColor(bmi),
          borderColor: '#000',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true,
            max: 40
          }
        }
      }
    });
  }

  function getBMICategory(bmi) {
    if (bmi < 18.5) {
      return 'Underweight';
    } else if (bmi >= 18.5 && bmi < 25) {
      return 'Normal weight';
    } else if (bmi >= 25 && bmi < 30) {
      return 'Overweight';
    } else {
      return 'Obese';
    }
  }

  function getBMIColor(bmi) {
    if (bmi < 18.5) {
      return 'rgba(255, 99, 132, 0.5)'; // Red
    } else if (bmi >= 18.5 && bmi < 25) {
      return 'rgba(75, 192, 192, 0.5)'; // Green
    } else if (bmi >= 25 && bmi < 30) {
      return 'rgba(255, 206, 86, 0.5)'; // Yellow
    } else {
      return 'rgba(153, 102, 255, 0.5)'; // Purple
    }
  }
    
    
</script>


<!-- 개발 영역 끝 -->








</th:block>
</html>